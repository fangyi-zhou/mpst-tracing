(petri-net
 (tokens (token buy msg) (token share msg) (token quote' msg)
  (token quote msg) (token query msg) (token S S) (token B B) (token A A))
 (places (place p10 ()) (place p9 ()) (place p8 ()) (place p7 ())
  (place p6 ()) (place p5 ()) (place p4 ()) (place p3 ((B 1))) (place p2 ())
  (place p1 ((S 1))) (place p0 ((A 1))))
 (transitions (transition A?S<buy> labelled) (transition A!S<buy> labelled)
  (transition B?A<share> labelled) (transition B!A<share> labelled)
  (transition S?B<quote'> labelled) (transition S!B<quote'> labelled)
  (transition S?A<quote> labelled) (transition S!A<quote> labelled)
  (transition A?S<query> labelled) (transition A!S<query> labelled))
 (arcs (arc A?S<buy> p10 transition-to-place ((S 1)))
  (arc p9 A?S<buy> place-to-transition ((S 1) (buy 1)))
  (arc A!S<buy> p9 transition-to-place ((A 1) (buy 1)))
  (arc p8 A!S<buy> place-to-transition ((A 1) (buy 1)))
  (arc B?A<share> p8 transition-to-place ((B 1)))
  (arc p7 B?A<share> place-to-transition ((B 1) (share 1)))
  (arc B!A<share> p7 transition-to-place ((B 1) (share 1)))
  (arc p6 B!A<share> place-to-transition ((B 1) (share 1)))
  (arc S?B<quote'> p6 transition-to-place ((B 1)))
  (arc p5 S?B<quote'> place-to-transition ((B 1) (quote' 1)))
  (arc S!B<quote'> p5 transition-to-place ((S 1) (quote' 1)))
  (arc p4 S!B<quote'> place-to-transition ((S 1) (quote' 1)))
  (arc S?A<quote> p4 transition-to-place ((A 1)))
  (arc p3 S?A<quote> place-to-transition ((A 1) (quote 1)))
  (arc S!A<quote> p3 transition-to-place ((S 1) (quote 1)))
  (arc p2 S!A<quote> place-to-transition ((S 1) (quote 1)))
  (arc A?S<query> p2 transition-to-place ((S 1)))
  (arc p1 A?S<query> place-to-transition ((S 1) (query 1)))
  (arc A!S<query> p1 transition-to-place ((A 1) (query 1)))
  (arc p0 A!S<query> place-to-transition ((A 1) (query 1)))))
